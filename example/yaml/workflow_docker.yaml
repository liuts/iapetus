# Example iapetus workflow using YAML and the docker backend
name: docker-yaml-demo
backend: docker
env_map:
  GLOBAL_ENV: global_value
steps:
  - name: echo-hello
    command: echo
    args: ["hello from docker"]
    image: alpine:3.18
    env_map:
      TASK_ENV: hello
    raw_asserts:
      - exit_code: 0
      - output_contains: hello
      - output_equals: "hello from docker\n"
      - output_matches_regexp: '^hello.*$'
  - name: echo-json
    command: sh
    args: ["-c", "echo '{\"foo\": 1, \"bar\": 2}'"]
    image: alpine:3.18
    depends: [echo-hello]
    raw_asserts:
      - exit_code: 0
      - output_json_equals: '{"foo": 1, "bar": 2}'
      - output_contains: '"foo": 1'
      - output_contains: '"bar": 2' 